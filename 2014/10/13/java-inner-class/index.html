<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><title>Java内部类 - 任春晓的博客</title><meta name="description" content="为什么Java支持嵌套类Java支持嵌套类有两个好处：让代码变得更清晰减少名字冲突使用内部类可以使代码更清晰，是因为你可以定义一个封闭的类，然后它可以方便的操纵这些对象的属性和调用这些对象的方法，甚至是私有的属性和方法。考虑下面的例子会更加清晰，程序遍历Employee对象当中的Job数组对象。12"><link type="text/css" rel="stylesheet" href="/css/pure.css?v=0.0.1"><link type="text/css" rel="stylesheet" href="/css/style.css?v=0.0.1"><script type="text/javascript" src="//cdn.bootcss.com/jquery/1.11.0/jquery.min.js"></script></head></html><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Java内部类</h1><a id="logo" href="/.">任春晓的博客</a></div><div id="nav-menu"><div class="bitcron_nav"><div class="site_nav_wrap"><div class="site_nav"><span class="a_container"><a href="/." class="selected active current">首页</a></span><span class="a_container"><a href="/archives/">归档</a></span><span class="a_container"><a href="/about/">关于</a></span><span class="a_container"><a href="/atom.xml">订阅</a></span></div></div></div></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Java内部类</h1><div class="post-meta">2014-10-13<script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" type="text/javascript"></script><span class="meta-space">  |  </span><span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv"></span><span> 浏览</span></span></div><!--文章内容--><div class="post-content"><h4 id="为什么Java支持嵌套类"><a href="#为什么Java支持嵌套类" class="headerlink" title="为什么Java支持嵌套类"></a>为什么Java支持嵌套类</h4><p>Java支持嵌套类有两个好处：</p>
<ul>
<li>让代码变得更清晰</li>
<li>减少名字冲突</li>
</ul>
<p>使用内部类可以使代码更清晰，是因为你可以定义一个封闭的类，然后它可以方便的操纵这些对象的属性和调用这些对象的方法，甚至是私有的属性和方法。</p>
<p>考虑下面的例子会更加清晰，程序遍历Employee对象当中的Job数组对象。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Job</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="keyword">private</span> String jobTitle;</span><br><span class="line">   Job (String jobTitle)</span><br><span class="line">   &#123;</span><br><span class="line">      <span class="keyword">this</span>.jobTitle = jobTitle;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">toString</span> <span class="params">()</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> jobTitle;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="keyword">private</span> String name;</span><br><span class="line">   <span class="keyword">private</span> Job [] jobs;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">int</span> jobIndex = <span class="number">0</span>;</span><br><span class="line">   Employee (String name, Job [] jobs)</span><br><span class="line">   &#123;</span><br><span class="line">      <span class="keyword">this</span>.name = name;</span><br><span class="line">      <span class="keyword">this</span>.jobs = jobs;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function">String <span class="title">getName</span> <span class="params">()</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> name;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">boolean</span> <span class="title">hasMoreJobs</span> <span class="params">()</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> jobIndex &lt; jobs.length;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function">Job <span class="title">nextJob</span> <span class="params">()</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> !hasMoreJobs () ? <span class="keyword">null</span> : jobs [jobIndex++];</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">JobIterator1</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span> <span class="params">(String [] args)</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      Job [] jobs = &#123; <span class="keyword">new</span> Job (<span class="string">"Janitor"</span>), <span class="keyword">new</span> Job (<span class="string">"Delivery Person"</span>) &#125;;</span><br><span class="line">      Employee e = <span class="keyword">new</span> Employee (<span class="string">"John Doe"</span>, jobs);</span><br><span class="line">      System.out.println (e.getName () + <span class="string">" works the following jobs:\n"</span>);</span><br><span class="line">      <span class="keyword">while</span> (e.hasMoreJobs ())</span><br><span class="line">         System.out.println (e.nextJob ());</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行程序输出如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">John Doe works the following jobs:</span><br><span class="line">Janitor</span><br><span class="line">Delivery Person</span><br></pre></td></tr></table></figure>
<p>看Employee当中的 hasMoreJobs() 和 nextJob() 方法，这两个方法相当于创建了一个迭代器。</p>
<p>JobIterator1有几个问题。</p>
<ul>
<li>你不能重新进行迭代。当然你可以给Employee类增加一个reset()方法，当迭代结束给jobIndex设置成为0。</li>
<li>更严重的问题是同一个Employee对象不可以创建多个迭代器。这个问题是因为hasMoreJobs() 和 nextJob() 方法在Employee类内部。</li>
</ul>
<p>为了解决上面的两个问题，看下面的例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Job</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="keyword">private</span> String jobTitle;</span><br><span class="line">   Job (String jobTitle)</span><br><span class="line">   &#123;</span><br><span class="line">      <span class="keyword">this</span>.jobTitle = jobTitle;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">toString</span> <span class="params">()</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> jobTitle;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="keyword">private</span> String name;</span><br><span class="line">   <span class="keyword">private</span> Job [] jobs;</span><br><span class="line">   Employee (String name, Job [] jobs)</span><br><span class="line">   &#123;</span><br><span class="line">      <span class="keyword">this</span>.name = name;</span><br><span class="line">      <span class="keyword">this</span>.jobs = jobs;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function">String <span class="title">getName</span> <span class="params">()</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> name;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function">JobIterator <span class="title">getJobIterator</span> <span class="params">()</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> JobIterator (jobs);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">JobIterator</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="keyword">private</span> Job [] jobs;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">int</span> jobIndex = <span class="number">0</span>;</span><br><span class="line">   JobIterator (Job [] jobs)</span><br><span class="line">   &#123;</span><br><span class="line">      <span class="keyword">this</span>.jobs = jobs;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">boolean</span> <span class="title">hasMoreJobs</span> <span class="params">()</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> jobIndex &lt; jobs.length;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function">Job <span class="title">nextJob</span> <span class="params">()</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> !hasMoreJobs () ? <span class="keyword">null</span> : jobs [jobIndex++];</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">JobIterator2</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span> <span class="params">(String [] args)</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      Job [] jobs = &#123; <span class="keyword">new</span> Job (<span class="string">"Janitor"</span>), <span class="keyword">new</span> Job (<span class="string">"Delivery Person"</span>) &#125;;</span><br><span class="line">      Employee e = <span class="keyword">new</span> Employee (<span class="string">"John Doe"</span>, jobs);</span><br><span class="line">      System.out.println (e.getName () + <span class="string">" works the following jobs:\n"</span>);</span><br><span class="line">      JobIterator ji = e.getJobIterator ();</span><br><span class="line">      <span class="keyword">while</span> (ji.hasMoreJobs ())</span><br><span class="line">         System.out.println (ji.nextJob ());</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果与JobIterator1的输出一样，JobIterator2与JobIterator1的代码区别就是把迭代器的代码从Employee中移动到了JobIterator类当中。尽管，Employee类定义了一个getJobIterator()方法，但是它每次返回一个新的JobIterator 对象。</p>
<p>Employee和JobIterator类是紧密耦合的，JobIterator的构造函数需要Employee的私有变量jobs。</p>
<p>尽管解决了JobIterator1的问题，但是引入了新的问题：新添加的类JobIterator是和Employee处于同一级别，如果将来增加JobIterator接口会引起文件名重复的冲突。在我们例子当中这个问题不是很大，但是在很大的项目当中就应当考虑这种情况。为了能让名字共存，一些类就需要完全的依赖其他的类。</p>
<p>定义内部类来解决这样的问题，例子如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Job</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="keyword">private</span> String jobTitle;</span><br><span class="line">   Job (String jobTitle)</span><br><span class="line">   &#123;</span><br><span class="line">      <span class="keyword">this</span>.jobTitle = jobTitle;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">toString</span> <span class="params">()</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> jobTitle;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="keyword">private</span> String name;</span><br><span class="line">   <span class="keyword">private</span> Job [] jobs;</span><br><span class="line">   Employee (String name, Job [] jobs)</span><br><span class="line">   &#123;</span><br><span class="line">      <span class="keyword">this</span>.name = name;</span><br><span class="line">      <span class="keyword">this</span>.jobs = jobs;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function">String <span class="title">getName</span> <span class="params">()</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> name;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function">JobIterator <span class="title">getJobIterator</span> <span class="params">()</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> JobIterator ();</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="class"><span class="keyword">class</span> <span class="title">JobIterator</span></span></span><br><span class="line"><span class="class">   </span>&#123;</span><br><span class="line">      <span class="keyword">private</span> <span class="keyword">int</span> jobIndex = <span class="number">0</span>;</span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasMoreJobs</span> <span class="params">()</span></span></span><br><span class="line"><span class="function">      </span>&#123;</span><br><span class="line">         <span class="keyword">return</span> jobIndex &lt; jobs.length;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="function"><span class="keyword">public</span> Object <span class="title">nextJob</span> <span class="params">()</span></span></span><br><span class="line"><span class="function">      </span>&#123;</span><br><span class="line">         <span class="keyword">return</span> !hasMoreJobs () ? <span class="keyword">null</span> : jobs [jobIndex++];</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">JobIterator3</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span> <span class="params">(String [] args)</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      Job [] jobs = &#123; <span class="keyword">new</span> Job (<span class="string">"Janitor"</span>), <span class="keyword">new</span> Job (<span class="string">"Delivery Person"</span>) &#125;;</span><br><span class="line">      Employee e = <span class="keyword">new</span> Employee (<span class="string">"John Doe"</span>, jobs);</span><br><span class="line">      System.out.println (e.getName () + <span class="string">" works the following jobs:\n"</span>);</span><br><span class="line">      Employee.JobIterator eji = e.getJobIterator ();</span><br><span class="line">      <span class="keyword">while</span> (eji.hasMoreJobs ())</span><br><span class="line">         System.out.println (eji.nextJob ());</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>JobIterator3的输出结果与JobIterator2和JobIterator1是一样的。嵌套类JobIterator不需要那个构造函数，因为它可以直接访问外部类的私有变量。这个改动使代码更加清晰了，同时减少了名字的冲突。</p>
<h4 id="Java支持什么样的嵌套类"><a href="#Java支持什么样的嵌套类" class="headerlink" title="Java支持什么样的嵌套类"></a>Java支持什么样的嵌套类</h4><p>Java支持两种嵌套类：(静态内部类)nested top-level classes 和 (内部类)inner classes。</p>
<p>此外，(内部类)inner classes分为，(成员内部类) instance inner class, (局部内部类) local inner class, and (匿名内部类) anonymous inner class。</p>
<h4 id="静态内部类-nested-top-level-classes"><a href="#静态内部类-nested-top-level-classes" class="headerlink" title="静态内部类 (nested top-level classes)"></a>静态内部类 (nested top-level classes)</h4><p>在类的内部声明一个类，并且使用static关键字进行修饰的类就是静态内部类。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TopLevelClass</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">NestedTopLevelClass</span></span></span><br><span class="line"><span class="class">   </span>&#123;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>就像一个静态字段和静态方法是独立于任何对象，他们是属于类的。考虑下面的代码片段：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TopLevelClass</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="keyword">static</span> <span class="keyword">int</span> staticField;</span><br><span class="line">   <span class="keyword">int</span> instanceField;</span><br><span class="line">   <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">NestedTopLevelClass</span></span></span><br><span class="line"><span class="class">   </span>&#123;</span><br><span class="line">      <span class="keyword">static</span></span><br><span class="line">      &#123;</span><br><span class="line">         System.out.println (<span class="string">"Can access staticField "</span> + staticField);</span><br><span class="line"><span class="comment">//         System.out.println ("Cannot access instanceField " + instanceField);</span></span><br><span class="line">      &#125;</span><br><span class="line">      &#123;</span><br><span class="line">         System.out.println (<span class="string">"Can access staticField "</span> + staticField);</span><br><span class="line"><span class="comment">//         System.out.println ("Cannot access instanceField " + instanceField);</span></span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>从上面的例子可以看出NestedTopLevelClass可以访问TopLevelClass的静态变量，但是不可以访问TopLevelClass的实例变量。因为NestedTopLevelClass是独立于任何TopLevelClass对象的。</p>
<blockquote>
<p>一个静态内部类不能访问任何外部类的实例成员(属性和方法)。</p>
</blockquote>
<p>尽管静态内部类不能访问任何外部类的实例成员，但是它自己可以声明实例变量。创建NestedTopLevelClass实例如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TopLevelClass</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">NestedTopLevelClass</span></span></span><br><span class="line"><span class="class">   </span>&#123;</span><br><span class="line">      <span class="keyword">int</span> myInstanceField;</span><br><span class="line">      NestedTopLevelClass (<span class="keyword">int</span> i)</span><br><span class="line">      &#123;</span><br><span class="line">         myInstanceField = i;</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NestedTopLevelClassDemo</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span> <span class="params">(String [] args)</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      TopLevelClass.NestedTopLevelClass ntlc;</span><br><span class="line">      ntlc = <span class="keyword">new</span> TopLevelClass.NestedTopLevelClass (<span class="number">5</span>);</span><br><span class="line">      System.out.println (ntlc.myInstanceField);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行后输出的结果为：5。</p>
<p>你是否想知道，静态内部类是否还可以包含静态内部类。并且，如果有两个相同名字的静态属性会如何处理，看下面的例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TopLevelClass</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> a = <span class="number">1</span>;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> b = <span class="number">3</span>;</span><br><span class="line">   <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">NestedTopLevelClass</span></span></span><br><span class="line"><span class="class">   </span>&#123;</span><br><span class="line">      <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> a = <span class="number">2</span>;</span><br><span class="line">      <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">NestedNestedTopLevelClass</span></span></span><br><span class="line"><span class="class">      </span>&#123;</span><br><span class="line">         <span class="function"><span class="keyword">void</span> <span class="title">printFields</span> <span class="params">()</span></span></span><br><span class="line"><span class="function">         </span>&#123;</span><br><span class="line">            System.out.println (<span class="string">"a = "</span> + a);</span><br><span class="line">            System.out.println (<span class="string">"b = "</span> + b);</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NestingAndShadowingDemo</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span> <span class="params">(String [] args)</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      TopLevelClass.NestedTopLevelClass.NestedNestedTopLevelClass nntlc;</span><br><span class="line">      nntlc = <span class="keyword">new</span> TopLevelClass.NestedTopLevelClass.NestedNestedTopLevelClass ();</span><br><span class="line">      nntlc.printFields ();</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a = 2</span><br><span class="line">b = 3</span><br></pre></td></tr></table></figure>
<blockquote>
<p>你可以使用private,protected,public,(包括无关键字)关键字来修饰静态内部类。</p>
</blockquote>
<h4 id="成员内部类-Instance-inner-classes"><a href="#成员内部类-Instance-inner-classes" class="headerlink" title="成员内部类 (Instance inner classes)"></a>成员内部类 (Instance inner classes)</h4><p>成员内部类可以访问静态和实例成员。像JobIterator3这个例子当中的JobIterator类就是成员内部类。</p>
<blockquote>
<p>你可以使用private,protected,public,(包括无关键字)关键字来修饰成员内部类。</p>
</blockquote>
<h4 id="局部内部类-Local-inner-classes"><a href="#局部内部类-Local-inner-classes" class="headerlink" title="局部内部类 (Local inner classes)"></a>局部内部类 (Local inner classes)</h4><p>嵌套类不仅仅可以在类的内部声明，Java也运行在任何代码块当中声明内部类。这表示可以出现在方法当中，甚至是if语句当中。这样的嵌套类称之为局部内部类。</p>
<p>局部内部类比成员内部类有一个优势，不仅仅可以访问外部类的实例变量和方法，还可以访问局部的变量或者方法的参数，看下面的例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ComputerLanguage</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="keyword">private</span> String name;</span><br><span class="line">   ComputerLanguage (String name)</span><br><span class="line">   &#123;</span><br><span class="line">      <span class="keyword">this</span>.name = name;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">toString</span> <span class="params">()</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> name;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LocalInnerClassDemo</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span> <span class="params">(String [] args)</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      ComputerLanguage [] cl = </span><br><span class="line">      &#123;</span><br><span class="line">         <span class="keyword">new</span> ComputerLanguage (<span class="string">"Ada"</span>),</span><br><span class="line">         <span class="keyword">new</span> ComputerLanguage (<span class="string">"Algol"</span>),</span><br><span class="line">         <span class="keyword">new</span> ComputerLanguage (<span class="string">"APL"</span>),</span><br><span class="line">         <span class="keyword">new</span> ComputerLanguage (<span class="string">"Assembly - IBM 360"</span>),</span><br><span class="line">         <span class="keyword">new</span> ComputerLanguage (<span class="string">"Assembly - Intel"</span>),</span><br><span class="line">         <span class="keyword">new</span> ComputerLanguage (<span class="string">"Assembly - Mostek"</span>),</span><br><span class="line">         <span class="keyword">new</span> ComputerLanguage (<span class="string">"Assembly - Motorola"</span>),</span><br><span class="line">         <span class="keyword">new</span> ComputerLanguage (<span class="string">"Assembly - VAX"</span>),</span><br><span class="line">         <span class="keyword">new</span> ComputerLanguage (<span class="string">"Assembly - Zilog"</span>),</span><br><span class="line">         <span class="keyword">new</span> ComputerLanguage (<span class="string">"BASIC"</span>),</span><br><span class="line">         <span class="keyword">new</span> ComputerLanguage (<span class="string">"C"</span>),</span><br><span class="line">         <span class="keyword">new</span> ComputerLanguage (<span class="string">"C++"</span>),</span><br><span class="line">         <span class="keyword">new</span> ComputerLanguage (<span class="string">"Cobol"</span>),</span><br><span class="line">         <span class="keyword">new</span> ComputerLanguage (<span class="string">"Forth"</span>),</span><br><span class="line">         <span class="keyword">new</span> ComputerLanguage (<span class="string">"Fortran"</span>),</span><br><span class="line">         <span class="keyword">new</span> ComputerLanguage (<span class="string">"Java"</span>),</span><br><span class="line">         <span class="keyword">new</span> ComputerLanguage (<span class="string">"LISP"</span>),</span><br><span class="line">         <span class="keyword">new</span> ComputerLanguage (<span class="string">"Logo"</span>),</span><br><span class="line">         <span class="keyword">new</span> ComputerLanguage (<span class="string">"Modula 2"</span>),</span><br><span class="line">         <span class="keyword">new</span> ComputerLanguage (<span class="string">"Pascal"</span>),</span><br><span class="line">         <span class="keyword">new</span> ComputerLanguage (<span class="string">"Perl"</span>),</span><br><span class="line">         <span class="keyword">new</span> ComputerLanguage (<span class="string">"Prolog"</span>),</span><br><span class="line">         <span class="keyword">new</span> ComputerLanguage (<span class="string">"Snobol"</span>)</span><br><span class="line">      &#125;;</span><br><span class="line">      Enumeration e = enumerator ((Object []) cl);</span><br><span class="line">      <span class="keyword">while</span> (e.hasMoreElements ())</span><br><span class="line">         System.out.println (e.nextElement ());</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">static</span> Enumeration <span class="title">enumerator</span> <span class="params">(<span class="keyword">final</span> Object [] array)</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      <span class="class"><span class="keyword">class</span> <span class="title">LocalInnerClass</span> <span class="keyword">implements</span> <span class="title">Enumeration</span></span></span><br><span class="line"><span class="class">      </span>&#123;</span><br><span class="line">         <span class="keyword">private</span> <span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">         <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasMoreElements</span> <span class="params">()</span></span></span><br><span class="line"><span class="function">         </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> index &lt; array.length;</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="function"><span class="keyword">public</span> Object <span class="title">nextElement</span> <span class="params">()</span></span></span><br><span class="line"><span class="function">         </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> array [index++].toString ();</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> LocalInnerClass ();</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>可以看到局部内部类访问了方法的array的参数，并且这个参数的定义必须是final的。</p>
<h4 id="匿名内部类-Anonymous-inner-classes"><a href="#匿名内部类-Anonymous-inner-classes" class="headerlink" title="匿名内部类 (Anonymous inner classes)"></a>匿名内部类 (Anonymous inner classes)</h4><p>当一个类很短，并且你想要声明一个没有名字的局部内部类，这个类就是匿名内部类。</p>
<p>示例代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Farmer</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="keyword">protected</span> String name;</span><br><span class="line">   Farmer (String name)</span><br><span class="line">   &#123;</span><br><span class="line">      <span class="keyword">this</span>.name = name;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">occupation</span> <span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BeefFarmer</span> <span class="keyword">extends</span> <span class="title">Farmer</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   BeefFarmer (String name)</span><br><span class="line">   &#123;</span><br><span class="line">      <span class="keyword">super</span> (name);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">void</span> <span class="title">occupation</span> <span class="params">()</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      System.out.println (<span class="string">"Farmer "</span> + name + <span class="string">" raises beef cattle"</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AnonymousInnerClassDemo1</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span> <span class="params">(String [] args)</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      BeefFarmer bf = <span class="keyword">new</span> BeefFarmer (<span class="string">"John Doe"</span>);</span><br><span class="line">      bf.occupation ();</span><br><span class="line">      <span class="keyword">new</span> Farmer (<span class="string">"Jane Doe"</span>)</span><br><span class="line">          &#123;</span><br><span class="line">              <span class="function"><span class="keyword">void</span> <span class="title">occupation</span> <span class="params">()</span></span></span><br><span class="line"><span class="function">              </span>&#123;</span><br><span class="line">                 System.out.println (<span class="string">"Farmer "</span> + name + <span class="string">" milks cows"</span>);</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;.occupation ();</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行后输出如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Farmer John Doe raises beef cattle</span><br><span class="line">Farmer Jane Doe milks cows</span><br></pre></td></tr></table></figure>
<p>匿名内部类使用父类的构造函数来进行初始化对象。我们是否可以使用自己定义的构造函数在匿名内部类中，答案是否定的，因为构造函数需要类名，而匿名内部类没有。</p>
<p>但是可以使用代码块来初始化对象，当创建匿名内部类的时候。</p>
<p>看下面的例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Farmer</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="keyword">protected</span> String name;</span><br><span class="line">   Farmer (String name)</span><br><span class="line">   &#123;</span><br><span class="line">      <span class="keyword">this</span>.name = name;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">occupation</span> <span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BeefFarmer</span> <span class="keyword">extends</span> <span class="title">Farmer</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   BeefFarmer (String name)</span><br><span class="line">   &#123;</span><br><span class="line">      <span class="keyword">super</span> (name);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">void</span> <span class="title">occupation</span> <span class="params">()</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      System.out.println (<span class="string">"Farmer "</span> + name + <span class="string">" raises beef cattle"</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AnonymousInnerClassDemo2</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span> <span class="params">(<span class="keyword">final</span> String [] args)</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      BeefFarmer bf = <span class="keyword">new</span> BeefFarmer (<span class="string">"John Doe"</span>);</span><br><span class="line">      bf.occupation ();</span><br><span class="line">      <span class="keyword">new</span> Farmer (<span class="string">"Jane Doe"</span>)</span><br><span class="line">          &#123;</span><br><span class="line">              <span class="keyword">private</span> String count;</span><br><span class="line"></span><br><span class="line">              &#123;</span><br><span class="line">                 <span class="keyword">if</span> (args.length == <span class="number">1</span>)</span><br><span class="line">                     count = args [<span class="number">0</span>];</span><br><span class="line">              &#125;</span><br><span class="line"></span><br><span class="line">              <span class="function"><span class="keyword">void</span> <span class="title">occupation</span> <span class="params">()</span></span></span><br><span class="line"><span class="function">              </span>&#123;</span><br><span class="line">                 <span class="keyword">if</span> (count == <span class="keyword">null</span>)</span><br><span class="line">                     System.out.println (<span class="string">"Farmer "</span> + name + <span class="string">" milks cows"</span>);</span><br><span class="line">                 <span class="keyword">else</span></span><br><span class="line">                     System.out.println (<span class="string">"Farmer "</span> + name + <span class="string">" milks "</span> +</span><br><span class="line">                                         count + <span class="string">" cows"</span>);</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;.occupation ();</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果运行上面的例子，并且在命令行传入参数10，则输出如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Farmer John Doe raises beef cattle</span><br><span class="line">Farmer Jane Doe milks 10 cows</span><br></pre></td></tr></table></figure>
<blockquote>
<p>即使匿名内部类没有名字，在编译的时候仍然会产生一个类文件。产生的类名是外部类+$+一个整数。上面例子中不但会生成一个AnonymousInnerClassDemo2.class文件，还会生成一个AnonymousInnerClassDemo2$1.class文件。</p>
</blockquote>
<p>考虑一下匿名内部类的实际应用，通常匿名内部类用于简化事件处理。看下面的例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AnonymousInnerClassDemo3</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span> <span class="params">(String [] args)</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      Frame f = <span class="keyword">new</span> Frame (<span class="string">"Anonymous Inner Class Demo #3"</span>);</span><br><span class="line">      f.addWindowListener (<span class="keyword">new</span> WindowAdapter ()</span><br><span class="line">                           &#123;</span><br><span class="line">                               <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">windowClosing</span> <span class="params">(WindowEvent e)</span></span></span><br><span class="line"><span class="function">                               </span>&#123;</span><br><span class="line">                                  System.exit (<span class="number">0</span>);</span><br><span class="line">                               &#125;</span><br><span class="line">                           &#125;);</span><br><span class="line">      f.setSize (<span class="number">300</span>, <span class="number">100</span>);</span><br><span class="line">      f.setVisible (<span class="keyword">true</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注册一个监听器，用于处理点击叉关闭整个界面的处理工作。</p>
<h4 id="回顾"><a href="#回顾" class="headerlink" title="回顾"></a>回顾</h4><p>Java有四种嵌套类：</p>
<ul>
<li>静态内部类</li>
<li>成员内部类</li>
<li>局部内部类</li>
<li>匿名内部类</li>
</ul>
<p>相比之下，成员内部类可以访问外部类的成员变量和方法。而静态内部类只可以访问外部类的静态变量和静态方法。</p>
<p>Java支持局部内部类出现在任何代码块当中，包括一个方法中或者if语句当中。此外，由于一些局部内部类很短并且不需要名字，所以有了匿名内部类。局部内部类和匿名内部类可以访问final的局部变量和方法参数。</p>
<p>【参考资料】</p>
<ol>
<li><a href="http://www.javaworld.com/article/2074000/core-java/classes-within-classes.html?page=1" target="_blank" rel="noopener">Classes within classes</a></li>
</ol>
<p>—EOF—</p>
</div><!--文章标签--><div class="tags"><a href="/tags/笔记/">笔记</a></div><!--评论--></div></div></div><div class="pure-u-1-4"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" id="search" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="https://renchunxiao.com"/></form></div><div class="widget"><div class="widget-title"> 分类</div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Bootstrap学习/">Bootstrap学习</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Elasticsearch/">Elasticsearch</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JVM/">JVM</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java解惑/">Java解惑</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/c/">c</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/cache/">cache</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/docker/">docker</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/eclipse/">eclipse</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/effective-java/">effective-java</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/go/">go</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/guava/">guava</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/html/">html</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/http/">http</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/j2ee/">j2ee</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/java-ognl/">java-ognl</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/javaNIO/">javaNIO</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/java基础/">java基础</a><span class="category-list-count">31</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/jdbc/">jdbc</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/jms/">jms</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/js基础/">js基础</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/junit/">junit</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a><span class="category-list-count">13</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/log/">log</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/lua/">lua</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/maven/">maven</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/mybatis/">mybatis</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/mysql/">mysql</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/redis/">redis</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/scala/">scala</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/tcp-ip/">tcp/ip</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/vim/">vim</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/websocket/">websocket</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/代码优化/">代码优化</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/折腾/">折腾</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据库连接池/">数据库连接池</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据结构/">数据结构</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/正则表达式/">正则表达式</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/理解计算机/">理解计算机</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/程序员修炼/">程序员修炼</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/算法/">算法</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/重构/">重构</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/页面设计/">页面设计</a><span class="category-list-count">1</span></li></ul></div><div class="widget"><div class="widget-title"> 标签</div><div class="tagcloud"><a href="/tags/面向对象-设计原则/" style="font-size: 12px;">面向对象 设计原则</a> <a href="/tags/笔记-代码优化/" style="font-size: 13.5px;">笔记 代码优化</a> <a href="/tags/linux/" style="font-size: 12.5px;">linux</a> <a href="/tags/linux-基础-笔记/" style="font-size: 12px;">linux 基础 笔记</a> <a href="/tags/git-学习笔记/" style="font-size: 14px;">git 学习笔记</a> <a href="/tags/j2ee-sevlet/" style="font-size: 12px;">j2ee sevlet</a> <a href="/tags/vim-学习笔记/" style="font-size: 13.5px;">vim 学习笔记</a> <a href="/tags/lua/" style="font-size: 13.5px;">lua</a> <a href="/tags/正则表达式/" style="font-size: 12px;">正则表达式</a> <a href="/tags/笔记-位运算/" style="font-size: 12.5px;">笔记 位运算</a> <a href="/tags/笔记/" style="font-size: 17.5px;">笔记</a> <a href="/tags/笔记-前端/" style="font-size: 12px;">笔记 前端</a> <a href="/tags/笔记-代码优化-程序设计实践笔记/" style="font-size: 12px;">笔记 代码优化 程序设计实践笔记</a> <a href="/tags/html/" style="font-size: 12px;">html</a> <a href="/tags/json-js-jsonp/" style="font-size: 12px;">json js jsonp</a> <a href="/tags/算法/" style="font-size: 12px;">算法</a> <a href="/tags/eclipse/" style="font-size: 12px;">eclipse</a> <a href="/tags/js/" style="font-size: 12px;">js</a> <a href="/tags/笔记-c/" style="font-size: 15px;">笔记 c</a> <a href="/tags/笔记-java/" style="font-size: 18px;">笔记 java</a> <a href="/tags/编码-base64/" style="font-size: 12px;">编码 base64</a> <a href="/tags/redis/" style="font-size: 13.5px;">redis</a> <a href="/tags/j2ee-jdbc/" style="font-size: 13.5px;">j2ee jdbc</a> <a href="/tags/java-ognl/" style="font-size: 12px;">java ognl</a> <a href="/tags/笔记-http/" style="font-size: 12.5px;">笔记 http</a> <a href="/tags/笔记-j2ee/" style="font-size: 12px;">笔记 j2ee</a> <a href="/tags/linux-shell/" style="font-size: 14.5px;">linux shell</a> <a href="/tags/linux-awk/" style="font-size: 12.5px;">linux awk</a> <a href="/tags/linux-sed/" style="font-size: 12.5px;">linux sed</a> <a href="/tags/go-学习笔记/" style="font-size: 13px;">go 学习笔记</a> <a href="/tags/笔记-scala/" style="font-size: 16.5px;">笔记 scala</a> <a href="/tags/mysql/" style="font-size: 12.5px;">mysql</a> <a href="/tags/lua-string/" style="font-size: 12px;">lua, string</a> <a href="/tags/lua-table/" style="font-size: 12px;">lua,table</a> <a href="/tags/java-junit/" style="font-size: 13px;">java, junit</a> <a href="/tags/java-jms/" style="font-size: 12.5px;">java, jms</a> <a href="/tags/java-maven/" style="font-size: 13px;">java, maven</a> <a href="/tags/java-cache/" style="font-size: 15.5px;">java, cache</a> <a href="/tags/java-log/" style="font-size: 12.5px;">java, log</a> <a href="/tags/java/" style="font-size: 16px;">java</a> <a href="/tags/锁/" style="font-size: 12px;">锁</a> <a href="/tags/笔记-java/" style="font-size: 17px;">笔记, java</a> <a href="/tags/lua/" style="font-size: 12px;">lua,</a> <a href="/tags/java-连接池/" style="font-size: 12.5px;">java, 连接池</a> <a href="/tags/笔记-ES/" style="font-size: 14.5px;">笔记, ES</a> <a href="/tags/笔记-Android/" style="font-size: 12.5px;">笔记, Android</a> <a href="/tags/笔记，docker/" style="font-size: 12px;">笔记，docker</a> <a href="/tags/笔记-mybatis/" style="font-size: 16px;">笔记, mybatis</a> <a href="/tags/笔记，redis/" style="font-size: 12px;">笔记，redis</a> <a href="/tags/笔记-websocket/" style="font-size: 12px;">笔记, websocket</a> <a href="/tags/笔记-tcp-ip协议/" style="font-size: 13px;">笔记, tcp/ip协议</a> <a href="/tags/笔记-数据结构/" style="font-size: 12.5px;">笔记, 数据结构</a></div></div><div class="widget"><div class="widget-title"> 最新文章</div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/11/11/timestamp/">深入理解程序中的时间属性</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/08/cms-gc/">深入学习 CMS GC</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/09/linkedlist-algorithm1/">LinkedList 简单算法题解析</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/28/java-thread-safe/">java 线程安全性</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/21/java-stack/">java 实现 stack</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/09/javaio-tips/">Java IO 概念理清</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/09/java-list-iterator/">jdk 中的 List 的迭代方式</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/16/tree-inTraverse/">二叉树的中序遍历</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/15/tree-PreTraverse/">二叉树的先序遍历</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/29/elasticsearch-mapping/">Elasticsearch Mapping 学习</a></li></ul></div><div class="widget"><div class="widget-title"> 友情链接</div><ul class="links-list"><li class="links-list-item"><a href="http://www.example.com" title="标题" target="_blank">标题</a></li></ul></div></div></div></div><div id="footer">© <a href="/." rel="nofollow">任春晓的博客.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a> Theme<a target="_blank" href="https://github.com/7ye/maupassant-hexo"> Maupassant.</a></div><a id="back_to_top" href="javascript:void(0)" class="back_to_top"><span>△</span></a><script type="text/javascript" src="/js/totop.js?v=0.0.1"></script><link rel="stylesheet" href="/css/jquery.fancybox.css"><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.1"></script><script>function auto_code_fit(){
  if($(".highlight").length != 0){
    var pc_width = $(".post-content").width();
    $(".highlight .code").find("pre").width((pc_width-70)+"px");
  }
}
window.onresize = function(){
  auto_code_fit();
}
auto_code_fit();</script></div></body>